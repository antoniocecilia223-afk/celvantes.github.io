<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cervantes | Super App</title>
    <style>
        /* VARI√ÅVEIS DE CORES */
        :root { --gold: #d4af37; --bg: #000; --card: #121212; --text: #fff; --border: #333; }
        .light-mode { --bg: #f5f5f5; --card: #ffffff; --text: #1a1a1a; --border: #ddd; }

        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); margin: 0; transition: 0.3s; height: 100vh; display: flex; flex-direction: column; }

        /* TELA DE REGISTO / LOGIN */
        #auth-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg); z-index: 1000; display: flex; align-items: center; justify-content: center; }
        .auth-card { background: var(--card); padding: 30px; border-radius: 15px; border: 1px solid var(--gold); width: 90%; max-width: 400px; text-align: center; }

        /* LAYOUT PRINCIPAL */
        header { display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; border-bottom: 1px solid var(--border); background: var(--bg); }
        .wrapper { display: flex; flex: 1; overflow: hidden; }
        nav { width: 70px; border-right: 1px solid var(--border); display: flex; flex-direction: column; align-items: center; padding-top: 20px; gap: 30px; }
        nav i { font-style: normal; font-size: 1.5rem; cursor: pointer; color: #888; }
        nav i.active { color: var(--gold); }

        main { flex: 1; overflow-y: auto; padding: 20px; }
        .section { display: none; max-width: 600px; margin: 0 auto; }
        .active-section { display: block; }

        /* COMPONENTES */
        .card { background: var(--card); border-radius: 12px; border: 1px solid var(--border); padding: 15px; margin-bottom: 20px; }
        input, select, textarea { width: 100%; padding: 12px; margin-top: 10px; border-radius: 8px; border: 1px solid var(--border); background: #000; color: #fff; box-sizing: border-box; }
        .light-mode input { background: #fff; color: #000; }
        button { background: var(--gold); border: none; padding: 12px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; width: 100%; margin-top: 10px; }
        
        /* POSTS */
        .post { position: relative; }
        .del-btn { position: absolute; top: 10px; right: 10px; color: #ff4444; cursor: pointer; font-size: 0.8rem; border: 1px solid #ff4444; padding: 2px 5px; border-radius: 4px; }
        .avatar { width: 60px; height: 60px; border-radius: 50%; background: #333; margin: 0 auto 10px; overflow: hidden; border: 2px solid var(--gold); }
        .avatar img { width: 100%; height: 100%; object-fit: cover; }
    </style>
</head>
<body class="dark-mode">

    <div id="auth-screen">
        <div class="auth-card">
            <h1 style="color: var(--gold);">CERVANTES</h1>
            <p>Cria a tua conta independente</p>
            <input type="text" id="reg-nome" placeholder="Nome Completo">
            <input type="text" id="reg-user" placeholder="@nome_de_utilizador">
            <input type="email" id="reg-email" placeholder="E-mail">
            <input type="password" id="reg-pass" placeholder="C√≥digo (Senha)">
            <button onclick="fazerRegisto()">Entrar no Cervantes</button>
        </div>
    </div>

    <header>
        <div style="font-weight: bold; color: var(--gold);">CERVANTES</div>
        <div id="user-display" style="font-size: 0.8rem;"></div>
    </header>

    <div class="wrapper">
        <nav>
            <i class="active" onclick="tab('feed', this)">üè†</i>
            <i onclick="tab('chats', this)">üí¨</i>
            <i onclick="tab('create', this)">‚ûï</i>
            <i onclick="tab('channel', this)">üì∫</i>
            <i onclick="tab('settings', this)">‚öôÔ∏è</i>
        </nav>

        <main>
            <section id="feed" class="section active-section">
                <h2>Feed Principal</h2>
                <div id="feed-list"></div>
            </section>

            <section id="chats" class="section">
                <h2>Conversas & Grupos</h2>
                <button onclick="alert('Criar Comunidade...')">üë• Criar Nova Comunidade</button>
                <div class="card" style="margin-top:20px;">
                    <strong>@Equipa_Cervantes</strong>
                    <p>Bem-vindo ao teu novo espa√ßo!</p>
                </div>
            </section>

            <section id="create" class="section">
                <div class="card">
                    <h2>Publicar Conte√∫do</h2>
                    <select id="p-type">
                        <option value="video">üé• V√≠deo / Reel</option>
                        <option value="foto">üì∏ Foto</option>
                        <option value="texto">üìù Texto / Facebook Style</option>
                        <option value="story">‚è≥ Hist√≥ria (Story)</option>
                    </select>
                    <textarea id="p-content" rows="4" placeholder="O que est√°s a pensar?"></textarea>
                    <button onclick="publicar()">Publicar Agora</button>
                </div>
            </section>

            <section id="channel" class="section">
                <div class="card" style="text-align: center;">
                    <div class="avatar"><img id="pic" src="https://via.placeholder.com/150"></div>
                    <h3 id="display-username">@utilizador</h3>
                    <input type="file" id="file-pic" style="display:none" onchange="changePic(this)">
                    <button onclick="document.getElementById('file-pic').click()" style="font-size:0.7rem;">Mudar Foto</button>
                </div>
                <h4>Minhas Publica√ß√µes</h4>
                <div id="my-list"></div>
            </section>

            <section id="settings" class="section">
                <h2>Defini√ß√µes</h2>
                <div class="card">
                    <p>Modo Escuro / Claro</p>
                    <button onclick="document.body.classList.toggle('light-mode')">Trocar Tema</button>
                    <p>L√≠ngua</p>
                    <select><option>Portugu√™s</option><option>English</option></select>
                    <button class="btn-danger" style="background:#ff4444; color:white; margin-top:30px;" onclick="location.reload()">Terminar Sess√£o</button>
                </div>
            </section>
        </main>
    </div>

    <script>
        let currentUser = null;
        let posts = JSON.parse(localStorage.getItem('posts') || '[]');

        function fazerRegisto() {
            const nome = document.getElementById('reg-nome').value;
            const user = document.getElementById('reg-user').value;
            if(!nome || !user) return alert("Preenche os dados!");
            
            currentUser = { nome, user };
            document.getElementById('auth-screen').style.display = 'none';
            document.getElementById('user-display').innerText = nome;
            document.getElementById('display-username').innerText = user;
            render();
        }

        function tab(id, el) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active-section'));
            document.querySelectorAll('nav i').forEach(i => i.classList.remove('active'));
            document.getElementById(id).classList.add('active-section');
            el.classList.add('active');
        }

        function changePic(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = e => document.getElementById('pic').src = e.target.result;
                reader.readAsDataURL(input.files[0]);
            }
        }

        function publicar() {
            const type = document.getElementById('p-type').value;
            const text = document.getElementById('p-content').value;
            if(!text) return alert("Escreve algo!");

            posts.unshift({ id: Date.now(), type, text, user: currentUser.user, date: new Date().toLocaleString() });
            localStorage.setItem('posts', JSON.stringify(posts));
            document.getElementById('p-content').value = "";
            render();
            tab('feed', document.querySelector('nav i'));
        }

        function apagar(id) {
            posts = posts.filter(p => p.id !== id);
            localStorage.setItem('posts', JSON.stringify(posts));
            render();
        }

        function render() {
            const feed = document.getElementById('feed-list');
            const canal = document.getElementById('my-list');
            feed.innerHTML = ""; canal.innerHTML = "";

            posts.forEach(p => {
                const html = `
                    <div class="card post">
                        ${p.user === currentUser?.user ? `<span class="del-btn" onclick="apagar(${p.id})">Apagar</span>` : ''}
                        <strong>${p.user}</strong> <small>‚Ä¢ ${p.type}</small>
                        <p>${p.text}</p>
                        <small style="color:gray">${p.date}</small>
                    </div>`;
                feed.innerHTML += html;
                if(p.user === currentUser.user) canal.innerHTML += html;
            });
        }
    </script>
</body>
</html>
