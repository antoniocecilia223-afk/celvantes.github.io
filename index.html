<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cervantes | Super App</title>
    <style>
        :root { --gold: #d4af37; --bg: #0b141a; --card: #111b21; --text: #e9edef; --wa-green: #00a884; }
        .light-mode { --bg: #f0f2f5; --card: #ffffff; --text: #111b21; }
        
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); margin: 0; overflow: hidden; height: 100vh; display: flex; flex-direction: column; transition: 0.3s; }

        /* HEADER & NAV */
        header { display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; background: var(--card); border-bottom: 1px solid #222; }
        .logo { color: var(--gold); font-weight: bold; font-size: 1.3rem; }
        
        .wrapper { display: flex; flex: 1; overflow: hidden; }
        nav { width: 70px; background: var(--card); display: flex; flex-direction: column; align-items: center; padding: 20px 0; gap: 25px; border-right: 1px solid #222; }
        nav i { font-style: normal; font-size: 1.6rem; cursor: pointer; color: #8696a0; }
        nav i.active { color: var(--gold); }

        main { flex: 1; overflow-y: auto; position: relative; }
        .section { display: none; height: 100%; flex-direction: column; }
        .active-section { display: flex; }

        /* REELS (SCROLL VERTICAL) */
        .reels-container { height: 100%; overflow-y: scroll; snap-type: y mandatory; }
        .reel-video { height: 100%; width: 100%; snap-align: start; background: #000; position: relative; display: flex; align-items: center; justify-content: center; }
        .reel-info { position: absolute; bottom: 80px; left: 20px; text-shadow: 1px 1px 5px #000; }

        /* CHATS & STATUS (WHATSAPP STYLE) */
        .status-bar { display: flex; gap: 15px; padding: 15px; overflow-x: auto; background: var(--card); border-bottom: 1px solid #222; }
        .status-circle { width: 55px; height: 55px; border-radius: 50%; border: 2px solid var(--wa-green); padding: 2px; }
        .status-circle img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }

        /* LIVE & CHAMADAS */
        #live-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 2000; display: none; }
        #call-ui { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #075e54; z-index: 2100; display: none; flex-direction: column; align-items: center; justify-content: center; }

        /* INTERFACE GERAL */
        .card { background: var(--card); border-radius: 12px; padding: 15px; margin: 15px; border: 1px solid #333; }
        button { background: var(--gold); border: none; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer; width: 100%; color: #000; margin-top: 10px; }
        .btn-live { background: #ff0000; color: #fff; margin-bottom: 20px; }
    </style>
</head>
<body>

    <div id="auth-screen" style="position:fixed; inset:0; background:var(--bg); z-index:3000; display:flex; align-items:center; justify-content:center;">
        <div class="card" style="width:300px; text-align:center;">
            <h1 style="color:var(--gold)">CERVANTES</h1>
            <input type="text" id="reg-user" placeholder="@utilizador" style="width:100%; padding:10px; margin:10px 0; border-radius:5px; border:none;">
            <button onclick="login()">ENTRAR</button>
        </div>
    </div>

    <div id="live-overlay">
        <video id="live-webcam" autoplay style="width:100%; height:100%; object-fit:cover;"></video>
        <button onclick="stopLive()" style="position:absolute; bottom:30px; left:50%; transform:translateX(-50%); width:auto; background:red; color:white;">FECHAR LIVE</button>
    </div>

    <div id="call-ui">
        <h2 id="call-target">Utilizador</h2>
        <p>A chamar...</p>
        <button onclick="document.getElementById('call-ui').style.display='none'" style="background:red; width:80px; height:80px; border-radius:50%; margin-top:50px;">‚úñ</button>
    </div>

    <header>
        <div class="logo">CERVANTES</div>
        <div id="lang-indicator">PT</div>
    </header>

    <div class="wrapper">
        <nav>
            <i class="active" onclick="tab('home', this)">üè†</i>
            <i onclick="tab('reels', this)">üé¨</i>
            <i onclick="tab('chats', this)">üí¨</i>
            <i onclick="tab('create', this)">‚ûï</i>
            <i onclick="tab('settings', this)">‚öôÔ∏è</i>
        </nav>

        <main>
            <section id="home" class="section active-section">
                <div class="status-bar">
                    <div class="status-circle"><img src="https://via.placeholder.com/100"></div>
                    <div class="status-circle" style="border-color:#888;"><img src="https://via.placeholder.com/100"></div>
                </div>
                <div id="feed-items" style="padding:10px;"></div>
            </section>

            <section id="reels" class="section">
                <div class="reels-container">
                    <div class="reel-video">
                        <video loop autoplay muted src="https://www.w3schools.com/html/mov_bbb.mp4" style="width:100%"></video>
                        <div class="reel-info"><h4>@Cervantes_Oficial</h4><p>O futuro √© agora! #reels</p></div>
                    </div>
                </div>
            </section>

            <section id="chats" class="section">
                <div class="card" onclick="startCall('Suporte')">
                    <strong>Suporte Cervantes</strong><br><small>Online - Clique para ligar</small>
                </div>
                <div style="padding:15px;">
                    <input type="text" placeholder="Mensagem Privada..." style="width:100%; padding:10px; border-radius:20px; background:#2a3942; border:none; color:white;">
                </div>
            </section>

            <section id="create" class="section" style="padding:20px;">
                <button class="btn-live" onclick="startLive()">üî¥ INICIAR LIVE NO CANAL</button>
                <div class="card" style="border: 2px dashed #d4af37; text-align:center; padding:40px;" onclick="document.getElementById('file-in').click()">
                    <span id="txt-galeria">Escolher da Galeria (Fotos/V√≠deos)</span>
                    <input type="file" id="file-in" hidden onchange="alert('Ficheiro selecionado!')">
                </div>
                <button onclick="alert('Publicado!')">PUBLICAR AGORA</button>
            </section>

            <section id="settings" class="section" style="padding:20px;">
                <div class="card">
                    <h3 id="txt-settings">Defini√ß√µes</h3>
                    <p id="txt-lang">Idioma / Language</p>
                    <select id="lang-select" onchange="changeLang()">
                        <option value="pt">Portugu√™s</option>
                        <option value="en">English</option>
                        <option value="fr">Fran√ßais</option>
                    </select>
                    <button style="margin-top:20px;" onclick="document.body.classList.toggle('light-mode')">Mudar Modo (Claro/Escuro)</button>
                    <button style="background:red; color:white; margin-top:20px;" onclick="location.reload()">Sair</button>
                </div>
            </section>
        </main>
    </div>

    <script>
        // Dicion√°rio de Idiomas
        const translations = {
            pt: { galeria: "Escolher da Galeria", settings: "Defini√ß√µes", lang: "Idioma", feed: "P√°gina Principal" },
            en: { galeria: "Choose from Gallery", settings: "Settings", lang: "Language", feed: "Home Page" },
            fr: { galeria: "Choisir de la Galerie", settings: "Param√®tres", lang: "Langue", feed: "Accueil" }
        };

        function changeLang() {
            const l = document.getElementById('lang-select').value;
            document.getElementById('txt-galeria').innerText = translations[l].galeria;
            document.getElementById('txt-settings').innerText = translations[l].settings;
            document.getElementById('txt-lang').innerText = translations[l].lang;
            document.getElementById('lang-indicator').innerText = l.toUpperCase();
        }

        function login() {
            const u = document.getElementById('reg-user').value;
            if(!u) return;
            document.getElementById('auth-screen').style.display = 'none';
        }

        function tab(id, el) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active-section'));
            document.querySelectorAll('nav i').forEach(i => i.classList.remove('active'));
            document.getElementById(id).classList.add('active-section');
            el.classList.add('active');
        }

        /* LIVE REAL */
        let stream = null;
        async function startLive() {
            stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
            document.getElementById('live-webcam').srcObject = stream;
            document.getElementById('live-overlay').style.display = 'block';
        }
        function stopLive() {
            stream.getTracks().forEach(t => t.stop());
            document.getElementById('live-overlay').style.display = 'none';
        }

        /* CHAMADA */
        function startCall(name) {
            document.getElementById('call-target').innerText = name;
            document.getElementById('call-ui').style.display = 'flex';
        }
    </script>
</body>
</html>
