<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cervantes | The AI Super App</title>
    <style>
        :root { 
            --gold: #d4af37; --bg: #000; --card: #121212; --text: #fff; 
            --blue: #1a73e8; --wa-green: #25d366; --ai-purple: #8e2de2;
        }
        
        body, html { margin: 0; padding: 0; background: var(--bg); color: var(--text); font-family: 'Google Sans', Roboto, sans-serif; height: 100vh; overflow: hidden; }

        /* AUTH (GOOGLE STYLE) */
        #auth-gate { position: fixed; inset: 0; background: #fff; z-index: 50000; display: flex; align-items: center; justify-content: center; color: #202124; }
        .g-card { border: 1px solid #dadce0; padding: 40px; border-radius: 8px; width: 400px; text-align: left; }
        .g-input { width: 100%; padding: 13px; margin: 10px 0; border: 1px solid #dadce0; border-radius: 4px; font-size: 16px; box-sizing: border-box; }
        .g-input:focus { border: 2px solid var(--blue); outline: none; }

        /* LAYOUT */
        .app-container { display: flex; height: 100vh; }
        nav { width: 80px; border-right: 1px solid #222; display: flex; flex-direction: column; align-items: center; padding: 25px 0; gap: 20px; background: #000; z-index: 100; }
        nav i { font-style: normal; font-size: 1.6rem; cursor: pointer; opacity: 0.4; transition: 0.3s; padding: 12px; border-radius: 15px; }
        nav i.active { opacity: 1; color: var(--gold); background: #1a1a1a; box-shadow: 0 0 15px rgba(212, 175, 55, 0.2); }

        main { flex: 1; overflow-y: auto; position: relative; scroll-behavior: smooth; }
        .page { display: none; height: 100%; animation: slideIn 0.3s ease-out; }
        .active-page { display: block; }

        /* AI CHAT BUBBLE (INTEGRADA) */
        .ai-badge { background: linear-gradient(45deg, var(--ai-purple), #4a00e0); color: white; padding: 2px 8px; border-radius: 10px; font-size: 10px; font-weight: bold; margin-left: 5px; }
        .ai-msg { background: rgba(142, 45, 226, 0.1); border-left: 3px solid var(--ai-purple); padding: 15px; border-radius: 10px; margin: 10px 0; }

        /* MARKETPLACE & PAY */
        .market-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px; padding: 20px; }
        .product { background: var(--card); border-radius: 15px; border: 1px solid #333; overflow: hidden; transition: 0.3s; }
        .product:hover { transform: translateY(-5px); border-color: var(--gold); }
        .wallet { background: url('https://www.transparenttextures.com/patterns/carbon-fibre.png'), linear-gradient(135deg, #1e1e1e, #000); border: 1px solid var(--gold); padding: 30px; border-radius: 20px; margin: 20px; }

        /* REELS & STUDIO */
        #cam-pro { width: 100%; height: 100%; object-fit: cover; }
        .cam-overlay { position: absolute; inset: 0; display: flex; flex-direction: column; justify-content: flex-end; padding: 40px; background: linear-gradient(transparent, rgba(0,0,0,0.5)); }

        @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div id="auth-gate">
        <div class="g-card">
            <h1 style="text-align:center; font-family:'Product Sans';">Cervantes</h1>
            <h2 id="auth-title" style="font-weight:400;">Iniciar sess√£o</h2>
            <p id="auth-desc">Use sua conta √∫nica Cervantes</p>
            <input type="text" class="g-input" id="auth-user" placeholder="Nome de utilizador">
            <div style="margin-top:50px; display:flex; justify-content:space-between; align-items:center;">
                <span style="color:var(--blue); cursor:pointer; font-weight:500;" id="auth-toggle" onclick="toggleAuth()">Criar conta</span>
                <button onclick="handleAuth()" style="background:var(--blue); color:white; border:none; padding:10px 24px; border-radius:4px; cursor:pointer; font-weight:500;">Pr√≥ximo</button>
            </div>
        </div>
    </div>

    <div class="app-container">
        <nav>
            <i class="active" onclick="tab('home', this)" title="Feed">üè†</i>
            <i onclick="tab('reels', this)" title="Reels">üì±</i>
            <i onclick="tab('studio', this)" title="Studio">üì∏</i>
            <i onclick="tab('market', this)" title="Loja">üõí</i>
            <i onclick="tab('chats', this)" title="Mensagens">üí¨</i>
            <i onclick="tab('pay', this)" title="Carteira">üí≥</i>
        </nav>

        <main>
            <section id="home" class="page active-page">
                <div style="padding:20px;">
                    <div class="ai-msg">
                        <strong>Cervantes AI</strong> <span class="ai-badge">ONLINE</span>
                        <p id="ai-greeting">Ol√°! Como posso ajudar o seu dia hoje?</p>
                    </div>
                    <div id="feed-render"></div>
                </div>
            </section>

            <section id="reels" class="page" style="overflow-y:scroll; snap-type:y mandatory;">
                <div style="height:100%; snap-align:start; background:#050505; display:grid; place-items:center;"><h2>Viral Reel #1</h2></div>
                <div style="height:100%; snap-align:start; background:#111; display:grid; place-items:center;"><h2>Viral Reel #2</h2></div>
            </section>

            <section id="studio" class="page">
                <video id="cam-pro" autoplay playsinline></video>
                <div class="cam-overlay">
                    <div style="display:flex; justify-content:center; gap:30px; align-items:center;">
                        <button onclick="alert('Filtro IA Aplicado')" style="background:var(--ai-purple); border:none; color:white; padding:10px; border-radius:10px;">IA Beauty</button>
                        <div style="width:70px; height:70px; border:5px solid white; border-radius:50%;" onclick="alert('Gravado!')"></div>
                        <button onclick="alert('Em Direto!')" style="color:red; background:white; padding:10px; border-radius:10px; font-weight:bold;">LIVE üî¥</button>
                    </div>
                </div>
            </section>

            <section id="market" class="page">
                <h2 style="padding:20px;">Marketplace</h2>
                <div class="market-grid">
                    <div class="product"><div style="height:150px; background:#222;"></div><div style="padding:15px;"><strong>Cervantes Glass</strong><br>899‚Ç¨</div></div>
                    <div class="product"><div style="height:150px; background:#222;"></div><div style="padding:15px;"><strong>Smart Home Hub</strong><br>120‚Ç¨</div></div>
                </div>
            </section>

            <section id="chats" class="page">
                <div style="padding:20px; background:var(--wa-green); color:black; font-weight:bold;">Cervantes Messenger</div>
                <div id="chat-list"></div>
            </section>

            <section id="pay" class="page">
                <div class="wallet">
                    <p style="opacity:0.6;">SALDO TOTAL</p>
                    <h1 style="font-size:2.5rem; margin:10px 0;">‚Ç¨ 12.450,00</h1>
                    <div style="display:flex; gap:10px; margin-top:20px;">
                        <span style="background:var(--gold); color:black; padding:5px 10px; border-radius:5px; font-size:12px; font-weight:bold;">GOLD MEMBER</span>
                    </div>
                </div>
                <div style="padding:20px;">
                    <h3>Atividade Recente</h3>
                    <p style="opacity:0.4;">Nenhuma transa√ß√£o hoje.</p>
                </div>
            </section>
        </main>
    </div>

    <script>
        let isLogin = true;
        let users = JSON.parse(localStorage.getItem('cv_users') || '["admin", "from_celta.5"]');
        let me = localStorage.getItem('cv_me');

        window.onload = () => {
            if(me) {
                document.getElementById('auth-gate').style.display = 'none';
                document.getElementById('ai-greeting').innerText = `Ol√°, ${me}! Queres publicar algo novo hoje?`;
                initCam();
                renderFeed();
            }
        };

        function toggleAuth() {
            isLogin = !isLogin;
            document.getElementById('auth-title').innerText = isLogin ? "Iniciar sess√£o" : "Criar conta";
            document.getElementById('auth-desc').innerText = isLogin ? "Use sua conta √∫nica Cervantes" : "Escolha um nome de utilizador exclusivo";
            document.getElementById('auth-toggle').innerText = isLogin ? "Criar conta" : "J√° tenho conta";
        }

        function handleAuth() {
            const user = document.getElementById('auth-user').value.trim().toLowerCase();
            if(!user) return;

            if(isLogin) {
                if(users.includes(user)) {
                    localStorage.setItem('cv_me', user);
                    location.reload();
                } else alert("Utilizador n√£o encontrado!");
            } else {
                if(users.includes(user)) alert("Este nome j√° est√° em uso! Escolha outro.");
                else {
                    users.push(user);
                    localStorage.setItem('cv_users', JSON.stringify(users));
                    localStorage.setItem('cv_me', user);
                    location.reload();
                }
            }
        }

        async function initCam() {
            try {
                const s = await navigator.mediaDevices.getUserMedia({video: true});
                document.getElementById('cam-pro').srcObject = s;
            } catch(e) {}
        }

        function tab(id, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
            document.querySelectorAll('nav i').forEach(i => i.classList.remove('active'));
            document.getElementById(id).classList.add('active-page');
            el.classList.add('active');
            if(id === 'chats') renderChats();
        }

        function renderFeed() {
            const feed = document.getElementById('feed-render');
            feed.innerHTML = `
                <div style="background:var(--card); padding:15px; border-radius:15px; margin-top:20px;">
                    <strong>@CervantesAI</strong> <span class="ai-badge">PRO</span>
                    <p>O mercado de a√ß√µes subiu 2% hoje. Queres que eu invista parte do teu saldo Cervantes Pay?</p>
                    <button style="background:var(--ai-purple); border:none; color:white; padding:8px 15px; border-radius:5px;">Analisar Investimento</button>
                </div>
            `;
        }

        function renderChats() {
            const list = document.getElementById('chat-list');
            list.innerHTML = `
                <div style="display:flex; gap:15px; padding:20px; border-bottom:1px solid #111; background: rgba(142, 45, 226, 0.05);">
                    <div style="width:50px; height:50px; border-radius:50%; background:var(--ai-purple); display:grid; place-items:center;">ü§ñ</div>
                    <div><strong>Cervantes AI Assistant</strong><br><small style="color:var(--ai-purple)">Sempre dispon√≠vel</small></div>
                </div>
            `;
            users.forEach(u => {
                if(u === me) return;
                list.innerHTML += `
                    <div style="display:flex; gap:15px; padding:20px; border-bottom:1px solid #111;">
                        <div style="width:50px; height:50px; border-radius:50%; background:#333; display:grid; place-items:center;">${u[0].toUpperCase()}</div>
                        <div><strong>${u}</strong><br><small style="opacity:0.5">Visto recentemente</small></div>
                    </div>`;
            });
        }
    </script>
</body>
</html>
