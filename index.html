<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cervantes | Super App</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        :root { --gold: #d4af37; --bg: #000; --card: #121212; --text: #fff; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }

        /* HEADER & LOGIN */
        header { display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; border-bottom: 1px solid #222; background: #000; }
        .logo { font-size: 1.5rem; font-weight: bold; color: var(--gold); letter-spacing: 2px; }
        
        /* STORIES (Estilo Instagram) */
        .stories-container { display: flex; gap: 15px; padding: 15px; overflow-x: auto; border-bottom: 1px solid #222; scrollbar-width: none; }
        .story-circle { min-width: 70px; height: 70px; border-radius: 50%; border: 2px solid var(--gold); padding: 2px; cursor: pointer; }
        .story-circle img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }

        /* NAVEGA√á√ÉO PRINCIPAL */
        .wrapper { display: flex; flex: 1; overflow: hidden; }
        nav { width: 80px; border-right: 1px solid #222; display: flex; flex-direction: column; align-items: center; padding-top: 20px; gap: 30px; }
        nav i { font-style: normal; font-size: 1.5rem; cursor: pointer; color: #888; transition: 0.3s; }
        nav i:hover, nav i.active { color: var(--gold); }

        /* CONTE√öDO FEED */
        main { flex: 1; overflow-y: auto; padding: 20px; scroll-behavior: smooth; }
        .post-card { background: var(--card); border-radius: 12px; margin-bottom: 25px; border: 1px solid #222; overflow: hidden; max-width: 600px; margin-inline: auto; }
        .post-header { padding: 12px; display: flex; align-items: center; gap: 10px; font-weight: bold; }
        .post-content { width: 100%; }
        .post-text { padding: 20px; font-size: 1.1rem; border-left: 4px solid var(--gold); background: #1a1a1a; margin: 10px; border-radius: 4px; }
        video { width: 100%; max-height: 500px; background: #000; }
        .post-actions { padding: 15px; display: flex; gap: 20px; color: #aaa; border-top: 1px solid #222; }

        /* REELS (TikTok Style) */
        #reels-section { display: none; height: 100%; overflow-y: scroll; snap-type: y mandatory; }
        .reel-video { height: 100%; width: 100%; snap-align: start; position: relative; display: flex; align-items: center; justify-content: center; background: #000; }

        /* PUBLICA√á√ÉO */
        .publish-modal { background: var(--card); padding: 20px; border-radius: 15px; border: 1px solid var(--gold); margin: 20px auto; max-width: 500px; }
        .btn-pub { background: var(--gold); color: #000; border: none; padding: 10px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; width: 100%; }
    </style>
</head>
<body>

<header>
    <div class="logo">CERVANTES</div>
    <div id="g_id_onload"
         data-client_id="YOUR_GOOGLE_CLIENT_ID" 
         data-callback="handleCredentialResponse">
    </div>
    <div class="g_id_signin" data-type="standard"></div>
</header>

<div class="wrapper">
    <nav>
        <i class="active" onclick="showSec('home')">üè†</i>
        <i onclick="showSec('reels')">üé¨</i>
        <i onclick="showSec('create')">‚ûï</i>
        <i onclick="showSec('ia')">ü§ñ</i>
    </nav>

    <main id="content-area">
        <section id="home-section">
            <div class="stories-container" id="stories">
                <div class="story-circle" onclick="alert('Ver Hist√≥ria de Cervantes')"><img src="https://via.placeholder.com/100" alt="Cervantes"></div>
            </div>
            <div id="feed">
                <div class="post-card">
                    <div class="post-header">@Cervantes_Oficial</div>
                    <div class="post-text">Bem-vindo √† nova era. Aqui podes publicar textos, v√≠deos e hist√≥rias reais! üöÄ</div>
                    <div class="post-actions"><span>‚ù§Ô∏è Like</span> <span>üí¨ Comentar</span></div>
                </div>
            </div>
        </section>

        <section id="reels-section">
            <div class="reel-video">
                <video loop onclick="this.paused?this.play():this.pause()" src="https://www.w3schools.com/html/mov_bbb.mp4"></video>
                <div style="position:absolute; bottom:20px; left:20px;">@Reels_Cervantes</div>
            </div>
        </section>

        <section id="create-section" style="display:none;">
            <div class="publish-modal">
                <h2>Criar Conte√∫do</h2>
                <select id="postType" onchange="toggleInputs()">
                    <option value="video">V√≠deo Feed</option>
                    <option value="texto">Texto (Post)</option>
                    <option value="historia">Hist√≥ria (Story)</option>
                </select>
                <textarea id="postDesc" placeholder="Escreva aqui..." rows="4"></textarea>
                <input type="file" id="postFile" accept="video/*,image/*">
                <button class="btn-pub" onclick="publicarReal()">PUBLICAR AGORA</button>
            </div>
        </section>

        <section id="ia-section" style="display:none;">
            <div class="publish-modal">
                <h2>Cervantes AI</h2>
                <textarea id="iaPrompt" placeholder="O que queres criar?"></textarea>
                <button class="btn-pub" onclick="alert('IA a processar...')">Gerar C√≥digo / Texto</button>
            </div>
        </section>
    </main>
</div>

<script>
    function showSec(id) {
        document.getElementById('home-section').style.display = id === 'home' ? 'block' : 'none';
        document.getElementById('reels-section').style.display = id === 'reels' ? 'block' : 'none';
        document.getElementById('create-section').style.display = id === 'create' ? 'block' : 'none';
        document.getElementById('ia-section').style.display = id === 'ia' ? 'block' : 'none';
        
        // Ativar √≠cone
        document.querySelectorAll('nav i').forEach(i => i.classList.remove('active'));
    }

    function toggleInputs() {
        const type = document.getElementById('postType').value;
        document.getElementById('postFile').style.display = type === 'texto' ? 'none' : 'block';
    }

    function publicarReal() {
        const type = document.getElementById('postType').value;
        const text = document.getElementById('postDesc').value;
        const feed = document.getElementById('feed');
        const stories = document.getElementById('stories');

        if(type === 'historia') {
            const story = document.createElement('div');
            story.className = 'story-circle';
            story.innerHTML = `<img src="https://via.placeholder.com/100/d4af37/000?text=NEW" onclick="alert('Hist√≥ria: ${text}')">`;
            stories.prepend(story);
            alert("Hist√≥ria publicada!");
        } else {
            const card = document.createElement('div');
            card.className = 'post-card';
            let content = type === 'video' ? `<video controls src="https://www.w3schools.com/html/movie.mp4"></video>` : `<div class="post-text">${text}</div>`;
            card.innerHTML = `<div class="post-header">@Utilizador_Logado</div>${content}<div class="post-actions"><span>‚ù§Ô∏è Like</span> <span>üí¨ Comentar</span></div>`;
            feed.prepend(card);
            alert("Post publicado no Feed!");
        }
        showSec('home');
    }

    // Login do Google (Simulado funcional)
    function handleCredentialResponse(response) {
        console.log("Encoded JWT ID token: " + response.credential);
        alert("Login realizado com sucesso via Google!");
        document.querySelector('.g_id_signin').style.display = 'none';
    }
</script>

</body>
</html>
